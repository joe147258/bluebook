<!DOCTYPE html>
<html>

<head>
    <title>Classroom - Bluebook</title>
    <!--Bootstrap and custom Bootstrap-->
    <link th:href="@{/css/bootstrap/bootstrap.min.css}" rel="stylesheet" />
    <link th:href="@{/css/css-main.css}" rel="stylesheet" />
    <!--icons-->
    <link th:href="@{/css/material-icons.css}" rel="stylesheet" />
</head>

<body>
    <header>
        <div class="align-header">
            <a href="/">
                <img src="/images/bluebook-icon.png" />
            </a>
            <p class="mb-0">An Interactive Learning Enviroment.</p>
        </div>
        <nav class="navbar navbar-dark bg-primary">
            <ul class="navbar-nav mr-auto align-header">
                <li class="nav-item first-item selected-nav">
                    <a class="nav-link" href="/">Classrooms</a>
                </li>
                <li th:if="${user.getRole().equals('TEACHER')}" class="nav-item">
                    <a class="nav-link" href="#">Quiz Management</a>
                </li>
                <li th:if="${user.getRole().equals('STUDENT')}" class="nav-item">
                    <a class="nav-link" href="#">Homework</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">Social</a>
                </li>
                <li class="nav-item nav-right-side">
                    <a class="nav-link" th:text="${user.getUsername()}"></a>
                </li>
            </ul>
        </nav>
    </header>
    <div class="main-content">
        <i class="material-icons right-hand-icon muted mt-4 settings-widget">settings</i>
        <div id="title">
            <h1 class="mb-4" th:text="${classroom.getName()}"></h1>
        </div>
        <nav class="navbar navbar-dark bg-primary ignore-main-padding">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item first-item selected-nav">
                    <a class="nav-link tab" value="STUDENT_TAB">Students</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link tab" value="TEST_TAB">Tests</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link tab" value="ANNOUNCEMENT_TAB">Announcements</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link tab" value="FORUM_TAB">Forum</a>
                </li>
            </ul>
        </nav>
        <!--Students tab-->
        <div id="students-tab">
            <div style="width: 60%; display: inline-block;" class="mt-2">
                <h5>Add a Student by username</h5>
                <div class="input-group mb-2">
                    <input type="text" class="form-control" placeholder="Student's Username" id="add-student-username">
                    <div class="input-group-append">
                        <button id="add-student" class="btn btn-primary" style="width: 75px;">Add</button>
                    </div>
                </div>
                <h5>Filter student by username or name</h5>
                <div class="input-group mb-2">
                    <input id="filterStudents" type="text" class="form-control" placeholder="Student's Username or name">
                </div>
            </div>
            <div id="selected-student" >
                <h5 class="mt-4">VergeOfEden</h5>
                <p class="mb-0">Seb Adamo</p>
                <img class="mb-2" src="/images/defuser.png" width="200px" height="200px"/>
                <div class="button-holder">
                    <button class="btn btn-primary btn-block">Message student</button>
                    <button class="btn btn-primary btn-block">See progress</button> <!--thinking about making this a seperate page-->
                </div>
                <hr>
                <button class="btn btn-danger mb-2">Remove from classroom</button>
                
            </div>
            <h5>List of Students</h5>
            <ul id="student-list" class="list-group">
                <li th:each="student: ${classroom.getStudents()}" class="list-group-item student-list-item">
                    <span th:text="${student.getUsername()}"></span>, 
                    <span th:text="${student.getFirstName()}"></span> 
                    <i class="material-icons right-hand-icon">account_box</i>
                </li>
            </ul>

        </div>
    </div>
    <!--Here are modals that are showned throughout this page-->
    <div id="unsuccessful-add-student-modal" class="modal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">This student cannot be added to the class.</h5>
                    <button type="button" class="close" data-dismiss="modal">
                        <span>&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>Maybe you got their username wrong? Remember you can't add teachers to this class, or
                        yourself! Perhaps they're already in the this classroom?</p>
                </div>
            </div>
        </div>
    </div>

    <div id="successful-add-student-modal" class="modal" tabindex="-1">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Successfully added.</h5>
                    <button type="button" class="close" data-dismiss="modal">
                        <span>&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <p>They are now in the classroom and can access all resources here. You can remove students are anytime.</p>
                </div>
            </div>
        </div>
    </div>

    <div id="settings-modal" class="modal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Classroom Settings</h5>
                    <button type="button" class="close" data-dismiss="modal">
                        <span>&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <form id="settings-form">
                        <div class="form-group">
                            <p class="mb-0">Classroom Name</p>
                            <input class="form-control" id="class-name" type="text" name="className"
                                placeholder="Enter the classroom's name e.g. History AP 1" th:value="${classroom.getName()}" required />
                            <p class="mb-0">Classroom Description</p>
                            <textarea class="form-control" id="class-desc" name="classDesc" rows="3"
                                placeholder="A short description of your classroom" th:text="${classroom.getDescription()}" required></textarea>
        
                            <button id="submit" class="btn btn-primary btn-block mt-3">Save Changes</button>
                            <p id='live-error1' style='color: red; display: none;'> The title is too long. Max character length is 60. </p>
                            <p id='live-error2' style='color: red; display: none;'> The description is too long. Max character length is 500.  </p>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</body>
<script th:src="@{/js/jquery-3.5.1.min.js}"></script>
<script th:src="@{/js/bootstrap/bootstrap.min.js}"></script>
<script th:src="@{/js/teacher-page.js}"></script>
<script th:inline="javascript">
    const classId = '[[${classroom.getId()}]]'.replace(/["']/g, "");
</script>

</html>