<!DOCTYPE html>
<html>

<head>
    <title>Home - Bluebook</title>
    <!--Bootstrap and custom Bootstrap-->
    <link th:href="@{/css/bootstrap/bootstrap.min.css}" rel="stylesheet" />
    <link th:href="@{/css/css-main.css}" rel="stylesheet" />
    <!--icons-->
    <link th:href="@{/css/material-icons.css}" rel="stylesheet" />
    <style>
        td {
            width: 585px;
        }
    </style>
</head>

<body>
    <header>
        <div class="align-header">
            <a href="/">
                <img src="/images/bluebook-icon.png" />
            </a>
            <p class="mb-0">An Interactive Learning Enviroment.</p>
        </div>
        <nav class="navbar navbar-dark bg-primary">
            <ul class="navbar-nav mr-auto align-header">
                <li class="nav-item first-item ">
                    <a class="nav-link" href="/">Classrooms</a>
                </li>
                <li th:if="${user.getRole().equals('TEACHER')}" class="nav-item selected-nav">
                    <a class="nav-link" href="#">Quiz Management</a>
                </li>

                <li class="nav-item">
                    <a class="nav-link" href="#">Social</a>
                </li>
                <li class="nav-item nav-right-side">
                    <a class="nav-link" th:text="${user.getUsername()}"></a>
                </li>
            </ul>
        </nav>
    </header>
    <div class="main-content">
        <h2 th:text="${workingTest.getName()}"></h2>
        <p class="mb-0">Feedback Type: <span id="fb-type" th:text="${workingTest.getFeedbackType()}"></span></p>
        <button class="btn btn-primary" data-toggle="modal" data-target="#feedback-type">
            Change Feedback Type
        </button>
        <hr>
        <h3>Add a Question</h3>
        <div class="form-group">
            <p class="mb-0">Question Type:</p>
            <select class="custom-select mt-2" id="question-type" required>
                <option value="MULTI_CHOICE" selected>Multiple Choice</option>
                <option value="TRUE_FALSE">True / False</option>
                <option value="INPUT">Input Based Question</option>
            </select>
            <!--MULTI-CHOICE-->
            <form id="mc-question-form">
                <p class="mb-1">Question:</p>
                <input class="form-control" type="input" placeholder="Question..." id="mc-question-string" required>
                <p class="mb-1">Correct Answer:</p>
                <input class="form-control" type="input" placeholder="Correct answer" id="mc-correct-answer" required />
                <p id="incorrect-title" class="mb-1">Incorrect Answers:</p>
                <input class="form-control mb-2" type="input" placeholder="Incorrect answer" id="mc-incorrect-answer1"
                    required />
                <input class="form-control mb-2" type="input" placeholder="Incorrect answer"
                    id="mc-incorrect-answer2" />
                <input class="form-control" type="input" placeholder="Incorrect answer" id="mc-incorrect-answer3" />
                <button class="btn btn-primary btn-block mt-2">Add Question</button>
            </form>
            <!--TRUE/FALSE-->
            <form id="tf-question-form" style="display: none;">
                <p class="mb-1">Question:</p>
                <input class="form-control" type="input" placeholder="Question..." id="tf-question-string" required>
                <p class="mb-1">Correct Answer:</p>
                <select class="custom-select mt-2" id="tf-correct-answer" required>
                    <option value="true" selected>True</option>
                    <option value="false">False</option>
                </select>

                <button class="btn btn-primary btn-block mt-2">Add Question</button>
            </form>

            <form id="input-question-form" style="display: none;">
                <p class="mb-1">Question:</p>
                <input class="form-control" type="input" placeholder="Question..." id="input-question-string" required>
                <p class="mb-1">Correct Answer:</p>
                <input class="form-control" type="input" placeholder="Correct Answer..." id="input-correct-answer"
                    required />
                <button class="btn btn-primary btn-block mt-2">Add Question</button>
            </form>
        </div>

        <hr>
        <h3>Questions:</h3>
        <ul class="list-group" id="question-list">
            <li th:each="question: ${workingTest.getQuestions()}" class="list-group-item">
                <div class="right-hand-icon">
                    <a th:href="'/edit/' + ${question.getId()}"><i class="material-icons text-muted">edit</i></a>
                    <a th:href="'/delete/' + ${question.getId()}"><i class="material-icons text-muted">delete</i></a>
                </div>
                <table class="table mb-0" style="width: 80%;">
                    <tbody>
                        <tr>
                            <td>Question Type:</td>
                            <td th:text="${question.getFormattedQuestionType()}"></td>
                        </tr>
                        <tr>
                            <td>Question:</td>
                            <td th:text="${question.getQuestion()}"></td>
                        </tr>
                        <tr>
                            <td>Correct Answer:</td>
                            <td th:text="${question.getCorrectAnswer()}"></td>
                        </tr>
                    </tbody>
                </table>
            </li>
        </ul>
    </div>
    <div id="feedback-type" class="modal" tabindex="-1">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Select Feedback Type:</h5>
                    <button type="button" class="close" data-dismiss="modal">
                        <span>&times;</span>
                    </button>
                </div>
                <div class="modal-body modal-lg">
                    <ul class="list-group">
                        <li class="list-group-item"><button type="button" class="btn btn-primary fb-btn"
                                value="END_FEEDBACK">END_FEEDBACK</button> Student gets feedback immediately after the
                            test has finished. </li>
                        <li class="list-group-item"><button type="button" class="btn btn-primary fb-btn"
                                value="MARK_FEEDBACK">MARK_FEEDBACK</button> You have to manually mark each test after
                            the student has finished.</li>
                        <li class="list-group-item"> <button type="button" class="btn btn-primary fb-btn"
                                value="INSTANT_FEEDBACK">INSTANT_FEEDBACK</button> After each question the student is
                            told if they are correct or not (Quiz).</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</body>
<script th:src="@{/js/jquery-3.5.1.min.js}"></script>
<script th:src="@{/js/bootstrap/bootstrap.min.js}"></script>
<script th:src="@{/js/test-add-questions.js}"></script>
<script th:inline="javascript">
    const testId = '[[${workingTest.getId()}]]'.replace(/["']/g, "");
    //this is a global var. It's not a const as it can be changed.
    var currentFbType = '[[${workingTest.getFeedbackType()}]]'.replace(/["']/g, "");
</script>

</html>